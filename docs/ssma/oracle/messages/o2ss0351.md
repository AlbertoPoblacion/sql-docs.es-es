---
title: 'O2SS0351: no se admite la conversión del método de recopilación (error)'
description: Describe por qué SQL Server Migration Assistant (SSMA) para Oracle no admite la conversión de algunos de los métodos de colección.
authors: nahk-ivanov
ms.service: ssma
ms.devlang: sql
ms.topic: article
ms.date: 1/22/2020
ms.author: alexiva
ms.openlocfilehash: d4f5204d00269d84ad143de790e969b7d71e1271
ms.sourcegitcommit: e042272a38fb646df05152c676e5cbeae3f9cd13
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/27/2020
ms.locfileid: "76762139"
---
# <a name="o2ss0351-conversion-of-collection-method-not-supported-error"></a>O2SS0351: no se admite la conversión del método de recopilación (error)

En este artículo se describe por qué SQL Server Migration Assistant (SSMA) para Oracle no admite la conversión de algunos de los métodos de recopilación.

## <a name="background"></a>Segundo plano

Una colección es un grupo ordenado de elementos, todo el mismo tipo. Es un concepto general que abarca listas, matrices y otros tipos de datos conocidos. `EXISTS`Puede usar los métodos, `COUNT` `LIMIT`,, `FIRST`, `LAST`, `PRIOR`, `NEXT`, `EXTEND`, `TRIM`y `DELETE` para administrar colecciones en Oracle cuyo tamaño es desconocido o varía.

Siempre que se hace referencia al `LIMIT` método en la consulta de colección, SSMA no puede resolver ese método. Por lo tanto, el uso de este método de colección genera un mensaje de error. En Oracle, `LIMIT` devuelve el número máximo de elementos que puede contener la matriz (que debe especificar en su definición de tipo).

## <a name="example"></a>Ejemplo

Considere el ejemplo siguiente:

```sql
DECLARE
    TYPE VARRAYTEST IS VARRAY(5) OF VARCHAR2(25);
    vTest VARRAYTEST;
BEGIN
    vTest := VARRAYTEST('text1', 'text2', 'text3');
    DBMS_OUTPUT.PUT_LINE('COLLECTION LIMIT IS -- ' || vTest.LIMIT);
END;
```

Al intentar convertir el código anterior en SSMA, se genera el siguiente mensaje de error:

> O2SS0351: no se admite la conversión del método de colección

## <a name="possible-remedies"></a>Posibles soluciones

La solución al error anterior es modificar el código en SQL Server porque `LIMIT` el método no es relevante en la forma en que SSMA emula la colección. Cuando SSMA convierte el elemento de colección de matrices de Oracle en SQL Server, asigna el tamaño máximo al elemento de la colección y SQL Server permite la asignación dinámica a la colección en el tiempo de ejecución.

Por lo tanto, en el ejemplo anterior, se `LIMIT` ha reemplazado el método por `Count` el método de SQL Server para obtener el número de elementos de la colección.

```sql
BEGIN
    DECLARE
        @CollectionIndexInt$TYPE varchar(max) = ' VARRAY OF STRING',
        @vTest dbo.CollectionIndexInt

    SET @vTest =
        dbo.CollectionIndexInt::[Null]
            .SetType(@CollectionIndexInt$TYPE)
            .AddString('text1')
            .AddString('text2')
            .AddString('text3')

    PRINT 'COLLECTION LIMIT IS -- ' + ISNULL(CAST(@vTest.Count AS nvarchar(max)), '')
END
```

## <a name="related-conversion-messages"></a>Mensajes de conversión relacionados

* [O2SS0316: no se admite la conversión del elemento de colección](o2ss0408.md)
* O2SS0323: no se admite la conversión del método de colección
* O2SS0408: no se admite el tipo de colección o registro
