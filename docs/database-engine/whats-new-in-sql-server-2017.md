---
title: Novedades de Motor de base de datos de Microsoft SQL Server 2017 | Microsoft Docs
ms.custom: ''
ms.date: 10/24/2017
ms.prod: sql
ms.reviewer: ''
ms.technology: release-landing
ms.topic: conceptual
ms.assetid: 42f45b23-6509-45e8-8ee7-76a78f99a920
author: rothja
ms.author: jroth
manager: jroth
monikerRange: '>=sql-server-2017||=sqlallproducts-allversions||>=sql-server-linux-2017'
ms.openlocfilehash: 9832f71c9a898d1d0f5a1ddc6b6c6ef047b95869
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 06/15/2019
ms.locfileid: "66794506"
---
# <a name="whats-new-in-database-engine---sql-server-2017"></a>Novedades de Motor de base de datos de Microsoft SQL Server 2017
[!INCLUDE[tsql-appliesto-ss2017-xxxx-xxxx-xxx-md](../includes/tsql-appliesto-ss2017-xxxx-xxxx-xxx-md.md)]

En este tema, se describen las mejoras realizadas en el [!INCLUDE[ssdenoversion-md](../includes/ssdenoversion-md.md)] de [!INCLUDE[sssqlv14-md](../includes/sssqlv14-md.md)]. Haga clic en los vínculos para obtener más información sobre cada punto.

> [!NOTE]  
> SQL Server 2017 incluye también las características agregadas en los Service Packs de SQL Server 2016. Para esos elementos, consulte [Novedades de SQL Server 2016 (motor de base de datos)](../database-engine/configure-windows/what-s-new-in-sql-server-2016-database-engine.md).

**Mejoras**  

- CLR usa la seguridad de acceso del código (CAS) de .NET Framework, que ya no se admite como un límite de seguridad. Un ensamblado CLR creado con la opción `PERMISSION_SET = SAFE` puede tener acceso a los recursos externos del sistema, llamar a código no administrado y adquirir privilegios sysadmin. A partir de [!INCLUDE[sssqlv14-md](../includes/sssqlv14-md.md)], se incluye una opción de `sp_configure` denominada `clr strict security` para mejorar la seguridad de los ensamblados CLR. La opción `clr strict security` está habilitada de forma predeterminada y trata los ensamblados `SAFE` y `EXTERNAL_ACCESS` como si estuvieran marcados con `UNSAFE`. La opción `clr strict security` se puede deshabilitar para permitir la compatibilidad con versiones anteriores, pero no se recomienda hacerlo. Microsoft recomienda que todos los ensamblados estén firmados con un certificado o clave asimétrica con el correspondiente inicio de sesión que tenga concedido el permiso `UNSAFE ASSEMBLY` en la base de datos maestra. Los ensamblados CLR se pueden agregar a una lista blanca como solución alternativa para la característica `clr strict security`. [sp_add_trusted_assembly](../relational-databases/system-stored-procedures/sys-sp-add-trusted-assembly-transact-sql.md), [sp_drop_trusted_assembly](../relational-databases/system-stored-procedures/sys-sp-drop-trusted-assembly-transact-sql.md) y [sys.trusted_asssemblies](../relational-databases/system-catalog-views/sys-trusted-assemblies-transact-sql.md) se agregan para admitir la lista blanca de ensamblados de confianza. Para obtener más información, vea [CLR strict security](configure-windows/clr-strict-security.md).  
- Una nueva DMF, [sys.dm_db_log_stats](../relational-databases/system-dynamic-management-views/sys-dm-db-log-stats-transact-sql.md), se incluye para exponer atributos a nivel de resumen e información sobre los archivos de registro de transacciones; resulta útil para supervisar el estado de los registros de transacciones.  
- Recompilaciones de índices en línea reanudables. Las recompilaciones de índices en línea reanudables permiten reanudar una operación de recompilación de índices en línea desde donde se detuvo después de un error (como una conmutación por error en una réplica o espacio en disco insuficiente). Las operaciones de recompilación de índices en línea también se pueden pausar y reanudar más adelante. Por ejemplo, puede que necesite liberar recursos del sistema temporalmente para poder ejecutar una tarea de prioridad alta o completar la recompilación de índices en otro período de mantenimiento si los períodos de mantenimiento disponibles son demasiado breves para una tabla grande. Por último, la recompilación de índices en línea reanudable no precisa de un gran espacio de registro, lo que permite realizar el truncamiento del registro mientras la operación de recompilación reanudable se está ejecutando. Vea [ALTER INDEX](../t-sql/statements/alter-index-transact-sql.md) y [Directrices para operaciones de índices en línea](../relational-databases/indexes/guidelines-for-online-index-operations.md).
- **Opción IDENTITY_CACHE para ALTER DATABASE SCOPED CONFIGURATION**. Se ha agregado una nueva opción, IDENTITY_CACHE, a la instrucción T-SQL `ALTER DATABASE SCOPED CONFIGURATION`. Cuando esta opción se establece en `OFF`, el Motor de base de datos puede evitar lagunas en los valores de columnas de identidad si un servidor se reinicia inesperadamente o realiza conmutación por error en un servidor secundario. Vea [ALTER DATABASE SCOPED CONFIGURATION](../t-sql/statements/alter-database-scoped-configuration-transact-sql.md).   
-  [!INCLUDE[ssnoversion](../includes/ssnoversion-md.md)] ahora ofrece funcionalidades de base de datos de gráficos para modelar datos orientados a relaciones más significativos. Esto engloba la nueva sintaxis de [CREATE TABLE](../t-sql/statements/create-table-sql-graph.md) para crear tablas de nodos y perimetrales y la palabra clave [MATCH](../t-sql/queries/match-sql-graph.md) para consultas. Para obtener más información, vea [Procesamiento de gráficos con SQL Server 2017](../relational-databases/graphs/sql-graph-overview.md).   
- Una nueva generación de mejoras de procesamiento de consultas que adapta las estrategias de optimización a las condiciones de tiempo de ejecución de la carga de trabajo de la aplicación. En esta primera versión de la familia de características de **procesamiento de consultas adaptable** se incluyen tres nuevas mejoras: **combinaciones adaptables del modo por lotes**, **comentarios de concesión de memoria del modo por lotes** y **ejecución intercalada** para funciones con valores de tabla de varias instrucciones.  Vea [Procesamiento de consultas inteligentes en bases de datos SQL](../relational-databases/performance/intelligent-query-processing.md).
- El ajuste automático es una característica de base de datos que proporciona información de los posibles problemas de rendimiento de las consultas, recomienda soluciones y corrige automáticamente los problemas identificados. El ajuste automático en [!INCLUDE[ssnoversion](../includes/ssnoversion-md.md)] le avisa cada vez que se detecta un posible problema de rendimiento y le permite tomar medidas correctoras, o bien deja que [!INCLUDE[ssde-md](../includes/ssde-md.md)] arregle automáticamente los problemas de rendimiento. Para obtener más información, vea [Automatic tuning](../relational-databases/automatic-tuning/automatic-tuning.md) (Ajuste automático).
- MEJORA DEL RENDIMIENTO DE LA GENERACIÓN DE ÍNDICES NO AGRUPADOS EN TABLAS OPTIMIZADAS PARA MEMORIA. Se ha mejorado notablemente el rendimiento a la hora de generar los índices no agrupados de las tablas MEMORY_OPTIMIZED durante la recuperación de base de datos. Esta mejora reduce considerablemente el tiempo de recuperación de base de datos cuando se usan índices no agrupados.  
- [sys.dm_os_sys_info](../relational-databases/system-dynamic-management-views/sys-dm-os-sys-info-transact-sql.md) tiene tres columnas nuevas: socket_count, cores_per_socket y numa_node_count. Esto resulta muy útil al ejecutar el servidor en una máquina virtual, ya que el NUMA excedente puede provocar hosts sobreconfirmados que, al final, se traducen en problemas de rendimiento.
- Se ha incluido una nueva columna modified_extent_page_count\, en [sys.dm_db_file_space_usage](../relational-databases/system-dynamic-management-views/sys-dm-db-file-space-usage-transact-sql.md) para poder llevar un seguimiento de los cambios diferenciales en cada archivo de base de datos de la base de datos. Esta nueva columna modified_extent_page_count le permite crear una solución de copia de seguridad inteligente que hace copias de seguridad diferenciales si el porcentaje de páginas modificadas en la base de datos está por debajo del umbral (digamos, 70-80 %); si no, realiza la copia de seguridad de base de datos completa.
- SELECT INTO ... ON Grupo de archivos: [SELECT INTO](../t-sql/queries/select-into-clause-transact-sql.md) ahora permite cargar una tabla en un grupo de archivos que no sea un grupo de archivos predeterminado del usuario que está haciendo uso de la palabra clave **ON**. Compatibilidad agregada a la sintaxis TSQL de SELECT INTO.
- Mejoras en la instalación de Tempdb: ahora, el programa de instalación permite especificar un tamaño inicial del archivo tempdb de hasta **256 GB (262 144 MB)** por archivo, con una advertencia que los clientes verán si el tamaño del archivo es mayor que 1 GB y si IFI no está habilitada. Es importante conocer las consecuencias de no tener habilitada la inicialización instantánea de archivos (IFI): el tiempo de instalación puede dispararse según cuál sea el tamaño inicial del archivo de datos de tempdb especificado. IFI no tiene ninguna repercusión en el tamaño del registro de transacciones, de modo que si se especifica un valor más alto de registro de transacciones, el tiempo de instalación aumentará invariablemente cuando tempdb se inicie durante la instalación, independientemente de cuál sea la configuración de IFI en la cuenta de servicio de SQL Server.
- Se ha incluido una nueva DMV, [sys.dm_tran_version_store_space_usage](../relational-databases/system-dynamic-management-views/sys-dm-tran-version-store-space-usage.md), para llevar un seguimiento del uso del almacén de versiones de cada base de datos. Esta nueva DMV es útil para supervisar el uso del almacén de versiones en tempdb, de forma que pueda planear la asignación de tamaño de tempdb de manera proactiva según el requisito de uso del almacén de versiones de cada base de datos, y todo ello sin perjuicio alguno del rendimiento ni sobrecargas al ejecutar esto en los servidores de producción.
- Una nueva DMF, [sys.dm_db_log_info](../relational-databases/system-dynamic-management-views/sys-dm-db-log-info-transact-sql.md), se ha incluido para exponer la información de VLF similar a DBCC LOGINFO para supervisar, notificar y prevenir posibles problemas de registro de transacciones provocados por el número de VLF, por el tamaño del VLF o por problemas de SHRINKFILE experimentados por los clientes.
- Mejor rendimiento de las copias de seguridad de bases de datos pequeñas en servidores de gama alta: mientras se hace una copia de seguridad de las bases de datos de SQL Server, el proceso de copia de seguridad requiere varias iteraciones del grupo de búferes para purgar las operaciones de E/S en curso. En consecuencia, el tiempo de copia de seguridad está relacionado no solo con la función de tamaño de la base de datos, sino también con una función de tamaño del grupo de búferes activo. En SQL Server 2017, la copia de seguridad está optimizada para evitar varias iteraciones del grupo de búferes, lo que constituye una mejora muy notable en el rendimiento de las copias de seguridad de bases de datos pequeñas y de tamaño medio. Esta mejora del rendimiento se va percibiendo cada vez menos a medida que aumenta el tamaño de la base de datos, ya que las páginas de las que hay que hacer una copia de seguridad y la E/S de la copia de seguridad tardan más tiempo en comparación con la iteración del grupo de búferes.  
- Ahora, el Almacén de consultas lleva un seguimiento de la información de resumen de las estadísticas de espera. Controlar las categorías de las estadísticas de espera de cada consulta en el Almacén de consultas permite alcanzar el siguiente nivel en la experiencia de solución de problemas de rendimiento, en tanto que se obtiene todavía más información sobre el rendimiento de las cargas de trabajo y sus cuellos de botella, pero conservando las principales ventajas del Almacén de consultas.  
- Ahora, las tablas temporales con versiones del sistema admiten CASCADE DELETE y CASCADE UPDATE.  
- Mejoras en el rendimiento del punto de comprobación indirecto.
- Se agregó compatibilidad con grupos de disponibilidad sin clúster.
- Se agregó la configuración de los grupos de disponibilidad de confirmación de réplica mínima.
- Los grupos de disponibilidad ahora pueden funcionar entre Windows y Linux para habilitar las migraciones y pruebas entre distintos sistemas operativos.
- Se agregó compatibilidad con la directiva de retención de tablas temporales.
- Nuevo DMV SYS.DM_DB_STATS_HISTOGRAM.
- Se ha agregado compatibilidad con la compilación y la recompilación de índices de almacén de columnas no en clúster en línea
- [sys.dm_db_stats_histogram (Transact-SQL)](../relational-databases/system-dynamic-management-views/sys-dm-db-stats-histogram-transact-sql.md) se agregó para examinar las estadísticas.
- El Asesor de optimización de base de datos (DTA) que se lanzó con SQL Server Management Studio versión 16.4, cuando se analiza SQL Server 2016 y versiones posteriores, tiene opciones adicionales.    
   - Rendimiento mejorado. Para más información, consulte [Mejoras de rendimiento mediante las recomendaciones del Asistente para la optimización de motor de base de datos (DTA)](../relational-databases/performance/performance-improvements-using-dta-recommendations.md).
   - La opción `-fc` para permitir las recomendaciones de los índices de almacén de columnas. Para más información, consulte [Utilidad DTA](../tools/dta/dta-utility.md) y [Recomendaciones de índice de almacén de columnas en el Asistente para la optimización de motor de base de datos (DTA)](../relational-databases/performance/columnstore-index-recommendations-in-database-engine-tuning-advisor-dta.md).  
   - La opción `-iq` para permitir que el DTA revise una carga de trabajo del Almacén de consultas. Para más información, consulte [Optimización de la base de datos mediante carga de trabajo del Almacén de consultas](../relational-databases/performance/tuning-database-using-workload-from-query-store.md).  
- En cuanto a la funcionalidad In-Memory, hay disponibles más mejoras de las tablas optimizadas para memoria y las funciones compiladas de forma nativa. Para obtener códigos de ejemplo que ilustren estas mejoras, vea [Optimización del procesamiento de OLTP en memoria JSON](../relational-databases/json/optimize-json-processing-with-in-memory-oltp.md).
    - Compatibilidad con las columnas calculadas en tablas optimizadas para memoria, incluidos los índices en columnas calculadas.
    - Compatibilidad total con las funciones JSON en módulos compilados de forma nativa y en restricciones CHECK.  
    - Operador`CROSS APPLY` en módulos compilados de forma nativa.   
- Se han agregado nuevas funciones de cadena [CONCAT_WS](../t-sql/functions/concat-ws-transact-sql.md), [TRANSLATE](../t-sql/functions/translate-transact-sql.md) y [TRIM](../t-sql/functions/trim-transact-sql.md).   
- Ahora se admite la cláusula `WITHIN GROUP` para la función [STRING_AGG](../t-sql/functions/string-agg-transact-sql.md).
- Se han agregado dos nuevas familias de intercalaciones japonesas (Japanese_Bushu_Kakusu_140 y Japanese_XJIS_140), así como la opción de intercalación con distinción de selector de variación (_VSS) para su uso en estas nuevas intercalaciones japonesas. Además, todas las nuevas intercalaciones admiten automáticamente los caracteres adicionales sin necesidad de especificar la opción _SC. Para obtener más información, consulte [Compatibilidad con la intercalación y Unicode](../relational-databases/collations/collation-and-unicode-support.md).   
- Las nuevas opciones de acceso de forma masiva ([BULK INSERT](../t-sql/statements/bulk-insert-transact-sql.md) y [OPENROWSET(BULK...)](../t-sql/functions/openrowset-transact-sql.md)) permiten el acceso a los datos directamente desde un archivo especificado como formato CSV y desde archivos almacenados en Azure Blob Storage mediante la nueva opción `BLOB_STORAGE` de [EXTERNAL DATA SOURCE](../t-sql/statements/create-external-data-source-transact-sql.md).
- Se ha agregado **COMPATIBILITY_LEVEL** de base de datos 140.   Los clientes que se ejecutan en este nivel obtendrán las características de lenguaje y los comportamientos del optimizador de consultas más recientes. Esto incluye cambios en cada versión preliminar que Microsoft publica.
- Mejoras en la manera en que los umbrales de actualización de estadísticas incrementales se calculan (modo de compatibilidad 140 necesario).
- Se ha agregado[sys.dm_exec_query_statistics_xml](../relational-databases/system-dynamic-management-views/sys-dm-exec-query-statistics-xml-transact-sql.md) .
- Se han agregado diversas mejoras de rendimiento y de lenguaje a los objetos optimizados para memoria:
    - Ahora, `sp_spaceused` se admite en las tablas optimizadas para memoria.
    - Ahora, `sp_rename` se admite en las tablas optimizadas para memoria y en los módulos T-SQL compilados de forma nativa.
    - Ahora, las expresiones `CASE` se admiten en los módulos T-SQL compilados de forma nativa.
    - Se ha quitado la limitación de ocho índices de las tablas optimizadas para memoria.
    - Ahora, `TOP (N) WITH TIES` se admite en los módulos T-SQL compilados de forma nativa.
    - Ahora, el rendimiento de `ALTER TABLE` en las tablas optimizadas para memoria es mucho más rápido.
    - Ahora, la tarea para rehacer el registro de transacciones de las tablas optimizadas para memoria se hace en paralelo. Esto hace que los tiempos de recuperación sean más rápidos y aumenta significativamente el rendimiento sostenido de la configuración de los grupos de disponibilidad AlwaysOn.
    - Ahora, los archivos de grupos de archivos optimizados para memoria se pueden almacenar en Azure Storage. Ahora también se puede realizar una copia de seguridad/restauración de los archivos optimizados para memoria en Azure Storage.
- Los índices de almacén de columnas en clúster ahora admiten columnas LOB (nvarchar(max), varchar(max), varbinary(max)).
- Se ha agregado la función de agregado [STRING_AGG](../t-sql/functions/string-agg-transact-sql.md).  
- Nuevos permisos: `DATABASE SCOPED CREDENTIAL` es ahora una clase de objeto protegible, que admite permisos `CONTROL`, `ALTER`, `REFERENCES`, `TAKE OWNERSHIP`y `VIEW DEFINITION` . `ADMINISTER DATABASE BULK OPERATIONS`, que antes se limitaba a SQL Database, ahora está visible en `sys.fn_builtin_permissions`.   
- Se ha agregado la DMV [sys.dm_os_host_info](../relational-databases/system-dynamic-management-views/sys-dm-os-host-info-transact-sql.md) para proporcionar información de sistema operativo para Windows y Linux.   
- Los roles de base de datos se crean con R Services para administrar los permisos asociados a paquetes. Para más información, vea [R Package management for SQL Server (Administración de paquetes de R para SQL Server)](../advanced-analytics/r-services/r-package-management-for-sql-server-r-services.md).

